import{S as t,i as a,s,v as n,w as e,x as i,n as r,r as o,y as c,z as l,B as g,A as p,ad as $,C as m,e as u,D as d,a as f,b as h,g as y,E as q,d as U,f as x,h as C,k as v,j as b,F as j}from"./client.b1568caf.js";import{P as w}from"./Page.c0a1156b.js";import{R as E}from"./RadioList.69686ce8.js";function F(t){let a,s,l,g,p,$,m,w=t[6]("search.timing",{total:t[1].total,s:(t[2]/1e3).toFixed(2)})+"";const F=new E({props:{stations:t[0],paging:t[1],url:t[5],apiUrl:t[3]}});return{c(){a=u("h1"),s=d(t[4]),l=f(),g=u("div"),p=d(w),$=f(),n(F.$$.fragment),this.h()},l(n){a=h(n,"H1",{class:!0});var i=y(a);s=q(i,t[4]),i.forEach(U),l=x(n),g=h(n,"DIV",{class:!0});var r=y(g);p=q(r,w),r.forEach(U),$=x(n),e(F.$$.fragment,n),this.h()},h(){C(a,"class","svelte-p013sm"),C(g,"class","timing svelte-p013sm")},m(t,n){v(t,a,n),b(a,s),v(t,l,n),v(t,g,n),b(g,p),v(t,$,n),i(F,t,n),m=!0},p(t,a){(!m||16&a)&&j(s,t[4]),(!m||70&a)&&w!==(w=t[6]("search.timing",{total:t[1].total,s:(t[2]/1e3).toFixed(2)})+"")&&j(p,w);const n={};1&a&&(n.stations=t[0]),2&a&&(n.paging=t[1]),32&a&&(n.url=t[5]),8&a&&(n.apiUrl=t[3]),F.$set(n)},i(t){m||(r(F.$$.fragment,t),m=!0)},o(t){o(F.$$.fragment,t),m=!1},d(t){t&&U(a),t&&U(l),t&&U(g),t&&U($),c(F,t)}}}function R(t){let a;const s=new w({props:{meta:t[7],$$slots:{default:[F]},$$scope:{ctx:t}}});return{c(){n(s.$$.fragment)},l(t){e(s.$$.fragment,t)},m(t,n){i(s,t,n),a=!0},p(t,[a]){const n={};128&a&&(n.meta=t[7]),65663&a&&(n.$$scope={dirty:a,ctx:t}),s.$set(n)},i(t){a||(r(s.$$.fragment,t),a=!0)},o(t){o(s.$$.fragment,t),a=!1},d(t){c(s,t)}}}async function D(t,a){const s=0|t.query.page||1;let n="/api/search?q="+encodeURIComponent(t.query.q||"");if(t.params.langCountry){const[a,s]=t.params.langCountry.split("-");n+="&countryCode="+s}const{items:e,paging:i,time:r}=await this.fetch(`${n}&page=${s}`).then(t=>t.json());return{stations:e,paging:i,apiUrl:n,time:r}}function I(t,a,s){let n,e,i,r;const{page:o}=l();g(t,o,t=>s(12,n=t));const{trans:c,lang:u,countryCode:d}=p();g(t,c,t=>s(6,r=t)),g(t,u,t=>s(13,e=t)),g(t,d,t=>s(14,i=t));let f,h,y,q,{stations:U}=a,{paging:x}=a,{time:C}=a,{apiUrl:v}=a;return t.$set=t=>{"stations"in t&&s(0,U=t.stations),"paging"in t&&s(1,x=t.paging),"time"in t&&s(2,C=t.time),"apiUrl"in t&&s(3,v=t.apiUrl)},t.$$.update=()=>{4096&t.$$.dirty&&s(4,f=n.query.q||""),24592&t.$$.dirty&&s(5,h=$({lang:e,countryCode:i,q:f})),16448&t.$$.dirty&&(y=i&&r("countries."+i)),16496&t.$$.dirty&&s(7,q=i?{title:r("search.head.country.title",{q:f,country:r("countries."+i)}),desc:r("search.head.country.desc",{q:f,country:r("countries."+i)}),canonical:m(h)}:{title:r("signal.head.global.title",{q:f}),desc:r("signal.head.global.title",{q:f}),canonical:m(h)})},[U,x,C,v,f,h,r,q,o,c,u,d]}class P extends t{constructor(t){super(),a(this,t,I,R,s,{stations:0,paging:1,time:2,apiUrl:3})}}export{P as S,D as p};
