import{S as t,i as a,s,v as e,w as n,x as i,n as r,r as o,y as c,z as l,B as g,A as p,ad as $,C as m,e as u,D as d,a as h,b as f,g as y,E as q,d as U,f as x,h as C,k as v,j as b,F as j}from"./client.d8002e50.js";import{P as w}from"./Page.0abb2221.js";import{R as E}from"./RadioList.3c379e23.js";function F(t){let a,s,l,g,p,$,m,w=t[6]("search.timing",{total:t[1].total,s:(t[2]/1e3).toFixed(2)})+"";const F=new E({props:{stations:t[0],paging:t[1],url:t[5],apiUrl:t[3]}});return{c(){a=u("h1"),s=d(t[4]),l=h(),g=u("div"),p=d(w),$=h(),e(F.$$.fragment),this.h()},l(e){a=f(e,"H1",{class:!0});var i=y(a);s=q(i,t[4]),i.forEach(U),l=x(e),g=f(e,"DIV",{class:!0});var r=y(g);p=q(r,w),r.forEach(U),$=x(e),n(F.$$.fragment,e),this.h()},h(){C(a,"class","svelte-p013sm"),C(g,"class","timing svelte-p013sm")},m(t,e){v(t,a,e),b(a,s),v(t,l,e),v(t,g,e),b(g,p),v(t,$,e),i(F,t,e),m=!0},p(t,a){(!m||16&a)&&j(s,t[4]),(!m||70&a)&&w!==(w=t[6]("search.timing",{total:t[1].total,s:(t[2]/1e3).toFixed(2)})+"")&&j(p,w);const e={};1&a&&(e.stations=t[0]),2&a&&(e.paging=t[1]),32&a&&(e.url=t[5]),8&a&&(e.apiUrl=t[3]),F.$set(e)},i(t){m||(r(F.$$.fragment,t),m=!0)},o(t){o(F.$$.fragment,t),m=!1},d(t){t&&U(a),t&&U(l),t&&U(g),t&&U($),c(F,t)}}}function R(t){let a;const s=new w({props:{meta:t[7],$$slots:{default:[F]},$$scope:{ctx:t}}});return{c(){e(s.$$.fragment)},l(t){n(s.$$.fragment,t)},m(t,e){i(s,t,e),a=!0},p(t,[a]){const e={};128&a&&(e.meta=t[7]),65663&a&&(e.$$scope={dirty:a,ctx:t}),s.$set(e)},i(t){a||(r(s.$$.fragment,t),a=!0)},o(t){o(s.$$.fragment,t),a=!1},d(t){c(s,t)}}}async function D(t,a){const s=0|t.query.page||1;let e="/api/search?q="+encodeURIComponent(t.query.q||"");if(t.params.langCountry){const[a,s]=t.params.langCountry.split("-");e+="&countryCode="+s}const{items:n,paging:i,time:r}=await this.fetch(`${e}&page=${s}`).then(t=>t.json());return{stations:n,paging:i,apiUrl:e,time:r}}function I(t,a,s){let e,n,i,r;const{page:o}=l();g(t,o,t=>s(12,e=t));const{trans:c,lang:u,countryCode:d}=p();g(t,c,t=>s(6,r=t)),g(t,u,t=>s(13,n=t)),g(t,d,t=>s(14,i=t));let h,f,y,q,{stations:U}=a,{paging:x}=a,{time:C}=a,{apiUrl:v}=a;return t.$set=t=>{"stations"in t&&s(0,U=t.stations),"paging"in t&&s(1,x=t.paging),"time"in t&&s(2,C=t.time),"apiUrl"in t&&s(3,v=t.apiUrl)},t.$$.update=()=>{4096&t.$$.dirty&&s(4,h=e.query.q||""),24592&t.$$.dirty&&s(5,f=$({lang:n,countryCode:i,q:h})),16448&t.$$.dirty&&(y=i&&r("countries."+i)),16496&t.$$.dirty&&s(7,q=i?{title:r("search.head.country.title",{q:h,country:r("countries."+i)}),desc:r("search.head.country.desc",{q:h,country:r("countries."+i)}),canonical:m(f)}:{title:r("signal.head.global.title",{q:h}),desc:r("signal.head.global.title",{q:h}),canonical:m(f)})},[U,x,C,v,h,f,r,q,o,c,u,d]}class P extends t{constructor(t){super(),a(this,t,I,R,s,{stations:0,paging:1,time:2,apiUrl:3})}}export{P as S,D as p};
